:root {
  /* HSL Color Palette */
  --hue-base: 240;
  --hue-primary: 217;
  --hue-success: 142;
  --hue-danger: 0;

  --bg-app: hsl(var(--hue-base), 10%, 4%);
  --bg-sidebar: hsl(var(--hue-base), 10%, 7%);
  --bg-panel: hsl(var(--hue-base), 10%, 9%);
  --bg-hover: hsl(var(--hue-base), 5%, 15%);
  
  --border-color: hsl(var(--hue-base), 5%, 20%);
  
  --text-main: hsl(var(--hue-base), 0%, 98%);
  --text-muted: hsl(var(--hue-base), 0%, 63%);
  
  --primary: hsl(var(--hue-primary), 91%, 60%);
  --primary-bg: hsl(var(--hue-primary), 91%, 60%, 0.1);
  --success: hsl(var(--hue-success), 70%, 45%);
  --danger: hsl(var(--hue-danger), 84%, 60%);

  --font-sans: 'Inter', system-ui, sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
}

* { box-sizing: border-box; padding: 0; margin: 0; }

body {
  background-color: var(--bg-app);
  color: var(--text-main);
  font-family: var(--font-sans);
  height: 100vh;
  overflow: hidden;
}

/* --- Components --- */

.app-container {
  display: flex;
  height: 100vh;
  font-size: 13px;
}

.sidebar {
  width: 280px;
  background-color: var(--bg-sidebar);
  border-right: 1px solid var(--border-color);
  display: flex;
  flex-direction: column;
}

.sidebar-header {
  height: 60px;
  display: flex;
  align-items: center;
  padding: 0 1.25rem;
  border-bottom: 1px solid var(--border-color);
  font-weight: 700;
  font-size: 14px;
}
.text-blue { color: var(--primary); }

.file-list {
  flex: 1;
  overflow-y: auto;
  padding: 0.75rem;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.file-item {
  padding: 0.6rem 0.75rem;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: var(--text-muted);
  transition: all 0.15s ease;
}
.file-item:hover { background-color: var(--bg-hover); color: var(--text-main); }
.file-item.active { background-color: var(--bg-hover); color: white; box-shadow: inset 2px 0 0 var(--primary); }
.file-item.has-proposal { color: var(--primary); }

.pulse-dot-small {
    width: 6px; height: 6px; background-color: var(--primary);
    border-radius: 50%; margin-left: auto; animation: pulse 2s infinite;
}

.main-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  background-color: transparent;
  min-width: 0;
}

.toolbar {
  height: 60px;
  border-bottom: 1px solid var(--border-color);
  display: flex;
  align-items: center;
  padding: 0 1.5rem;
}

.badge { padding: 4px 8px; border-radius: 12px; font-size: 11px; font-weight: 600; text-transform: uppercase; }
.badge-blue { background-color: var(--primary-bg); color: var(--primary); border: 1px solid rgba(96, 165, 250, 0.2); }

.reason-banner {
    border-bottom: 1px solid var(--border-color);
    padding: 1rem 1.5rem;
    display: flex; gap: 1rem; align-items: flex-start;
}
.reason-icon { padding: 8px; background: var(--bg-hover); border-radius: 8px; color: var(--primary); }
.reason-content { flex: 1; }
.reason-label { font-size: 11px; text-transform: uppercase; color: var(--text-muted); font-weight: 600; margin-bottom: 4px; }
.reason-text { font-size: 14px; line-height: 1.5; }

.action-bar {
  height: 70px;
  background-color: var(--bg-sidebar);
  border-top: 1px solid var(--border-color);
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 1.5rem;
}

.pulse-dot { width: 8px; height: 8px; background: var(--primary); border-radius: 50%; animation: pulse 2s infinite; }

.btn { height: 38px; padding: 0 16px; border-radius: 6px; display: flex; align-items: center; gap: 8px; font-weight: 600; cursor: pointer; border: none; font-size: 13px; }
.btn-secondary { background: var(--bg-hover); color: var(--text-muted); border: 1px solid var(--border-color); }
.btn-success { background: var(--success); color: white; }

.content-area {
  flex: 1;
  overflow: hidden;
  position: relative;
  /* Ensuring it takes available space */
  display: flex; 
  flex-direction: row; 
}

.editor-textarea {
  width: 100%; height: 100%; background: transparent; border: none; padding: 2rem;
  resize: none; color: #e4e4e7; font-family: var(--font-mono); font-size: 14px; line-height: 1.7;
}
.editor-textarea:focus { outline: none; }

.diff-container {
  height: 100%; overflow-y: auto; padding: 2rem; font-family: var(--font-mono); font-size: 13.5px; line-height: 1.6;
}
.diff-line { white-space: pre-wrap; display: block; }
.diff-added { background: rgba(22, 163, 74, 0.1); color: #86efac; border-left: 2px solid var(--success); }
.diff-removed { background: rgba(220, 38, 38, 0.08); color: #fca5a5; text-decoration: line-through; opacity: 0.6; border-left: 2px solid var(--danger); }

@keyframes pulse {
    0% { opacity: 1; box-shadow: 0 0 0 0 rgba(96, 165, 250, 0.4); }
    70% { opacity: 0.5; box-shadow: 0 0 0 6px rgba(96, 165, 250, 0); }
    100% { opacity: 1; box-shadow: 0 0 0 0 rgba(96, 165, 250, 0); }
}

/* --- Utility Shims for Layout (Replacing Tailwind) --- */
.flex { display: flex; }
.flex-col { flex-direction: column; }
.flex-1 { flex: 1; }
.flex-grow { flex-grow: 1; }  /* Add this if needed explicitly */

.relative { position: relative; }
.absolute { position: absolute; }
.h-full { height: 100%; }
.w-full { width: 100%; }
.w-1\/2 { width: 50%; } /* Escaped generic class name or strict match */
.w-half { flex: 0 0 50%; width: 50%; }  /* FORCE 50% width in flex context */

.overflow-hidden { overflow: hidden; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.gap-2 { gap: 0.5rem; }

.bg-neutral-900 { background-color: var(--bg-sidebar); }
.bg-black\/50 { background-color: rgba(0,0,0,0.5); }
.backdrop-blur-sm { backdrop-filter: blur(4px); }

.border-r { border-right: 1px solid var(--border-color); }
.border-white\/10 { border-color: rgba(255,255,255,0.1); }
.border-none { border: none; }

.text-xs { font-size: 0.75rem; }
.text-gray-500 { color: var(--text-muted); }
.text-gray-600 { color: #52525b; }
.text-white { color: white; }
.hover\:text-white:hover { color: white; }

.transition-all { transition: all 0.3s ease; }
.z-10 { z-index: 10; }
.top-2 { top: 0.5rem; }
.right-2 { right: 0.5rem; }
.px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
.py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
.rounded { border-radius: 0.25rem; }
